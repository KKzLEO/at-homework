(this["webpackJsonpat-homework"]=this["webpackJsonpat-homework"]||[]).push([[0],{405:function(t,e,n){},412:function(t,e,n){"use strict";n.r(e);n(203),n(213);var a,r,c,i,s,o,d,u,l,b,f,p,j,g=n(4),h=n.n(g),x=n(198),v=n.n(x),O=(n(405),n(105)),m=n(27),T=n(28),Z={xLarge:"1200px",large:"992px",medium:"768px",small:"576px"},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"@media (max-".concat(e?"height":"width",": ").concat(t,")")},w=T.a.div(a||(a=Object(m.a)(["\n  margin: 1.25rem;\n  padding: 10px;\n  background: white;\n  box-shadow: 0px 5px 5px -3px rgb(0 0 0 / 20%),\n    0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%);\n  border-radius: 4px;\n\n  "," {\n    margin: 0;\n  }\n"])),D(Z.small)),y=T.a.div(r||(r=Object(m.a)(["\n  font-size: 1.25rem;\n  font-weight: 500;\n  margin-bottom: 20px;\n  color: rgba(0, 0, 0, 0.87);\n"]))),k=T.a.div(c||(c=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  flex-wrap: wrap;\n"]))),M=T.a.div(i||(i=Object(m.a)(["\n  margin-right: 10px;\n"]))),A=T.a.button(s||(s=Object(m.a)(["\n  padding: 7px 15px;\n  font-size: 12px;\n  border-radius: 3px;\n  cursor: pointer;\n  background: #fff;\n  border: 1px solid #dcdfe6;\n"]))),Y=T.a.div(o||(o=Object(m.a)(["\n  flex: 1;\n"]))),E=T.a.div(d||(d=Object(m.a)(["\n  font-size: 12px;\n  margin-top: 5px;\n"]))),S=T.a.div(u||(u=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  min-height: 200px;\n"]))),F=T.a.div(l||(l=Object(m.a)(["\n  border-top: 4px solid;\n  border-color: ",";\n  flex: 1;\n  margin-right: 10px;\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  "," {\n    margin-right: 5px;\n  }\n"])),(function(t){return t.isAvailable?"#02cab9":"#b6b6b6"}),D(Z.small)),B=T.a.div(b||(b=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),C=Object(T.a)(B)(f||(f=Object(m.a)(["\n  margin-top: 10px;\n"]))),H=Object(T.a)(B)(p||(p=Object(m.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]))),N=Object(T.a)(B)(j||(j=Object(m.a)(["\n  margin-bottom: 10px;\n  font-size: 12px;\n  color: ",";\n  font-weight: ",";\n"])),(function(t){return t.isAvailable?"#02cab9":"#b6b6b6"}),(function(t){return t.isAvailable?700:300})),P=n(416),z=n(418),L={available:[{start:"2021-05-24T19:00:00Z",end:"2021-05-24T21:00:00Z"},{start:"2021-05-25T08:00:00Z",end:"2021-05-25T09:00:00Z"},{start:"2021-05-25T10:00:00Z",end:"2021-05-25T11:00:00Z"},{start:"2021-05-25T14:00:00Z",end:"2021-05-25T15:00:00Z"},{start:"2021-05-25T19:00:00Z",end:"2021-05-25T21:00:00Z"},{start:"2021-05-26T07:00:00Z",end:"2021-05-26T09:00:00Z"},{start:"2021-05-26T10:00:00Z",end:"2021-05-26T11:00:00Z"},{start:"2021-05-26T19:00:00Z",end:"2021-05-26T21:00:00Z"},{start:"2021-05-27T07:00:00Z",end:"2021-05-27T09:00:00Z"},{start:"2021-05-27T19:00:00Z",end:"2021-05-27T21:00:00Z"},{start:"2021-05-28T07:00:00Z",end:"2021-05-28T09:00:00Z"},{start:"2021-05-28T10:00:00Z",end:"2021-05-28T11:00:00Z"},{start:"2021-05-28T12:00:00Z",end:"2021-05-28T13:00:00Z"},{start:"2021-05-28T19:00:00Z",end:"2021-05-28T21:00:00Z"},{start:"2021-05-29T16:00:00Z",end:"2021-05-29T16:30:00Z"}],booked:[{start:"2021-05-25T15:00:00Z",end:"2021-05-25T16:00:00Z"},{start:"2021-05-26T11:00:00Z",end:"2021-05-26T13:00:00Z"},{start:"2021-05-26T14:00:00Z",end:"2021-05-26T15:00:00Z"},{start:"2021-05-27T10:00:00Z",end:"2021-05-27T13:00:00Z"},{start:"2021-05-27T14:00:00Z",end:"2021-05-27T15:00:00Z"},{start:"2021-05-28T11:00:00Z",end:"2021-05-28T12:00:00Z"},{start:"2021-05-28T14:00:00Z",end:"2021-05-28T15:00:00Z"}]},I={fetchSchedule:function(){return new Promise((function(t){setTimeout((function(){t(L)}),100)}))}},W=n(8),V=n(104),J=n(131),R=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return(Array(e).join(n)+t).slice(-e)},X=function(t){return null===t||void 0===t},G=function(t,e){var n=e.days,a=e.months,r=e.years,c=e.hours,i=new Date(t);return n?i.setDate(i.getDate()+n):a?i.setMonth(i.getMonth()+a):r?i.setFullYear(i.getFullYear()+r):c&&i.setTime(i.getTime()+60*c*60*1e3),i},K=function(t,e){var n=e.days,a=e.months,r=e.years;return G(t,{days:-n,months:-a,years:-r})},q=function(t){var e="[object Date]"===Object.prototype.toString.call(t),n=t&&!Number.isNaN(t.valueOf());return e&&n},Q=function(t){return t%12||12},U=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD",n=new Date(t);if(!q(n))return new Error("invalid date");var a=n.getFullYear(),r=n.getMonth()+1,c=n.getDate(),i=n.getHours(),s=Q(i),o=n.getMinutes(),d=n.getSeconds();return e.replace("YYYY",a).replace("MM",R(r,2,"0")).replace("DD",R(c,2,"0")).replace("HH",R(i,2,"0")).replace("hh",R(s,2,"0")).replace("mm",R(o,2,"0")).replace("ss",R(d,2,"0"))},$=n(134),_=n(64),tt="BOOKED",et="AVAILABLE",nt={setStartDate:Object(W.b)({startDate:function(t){var e=t.startDate;return K(e,{days:e.getDay()})}}),updatedCalendar:Object(W.b)({calendar:function(t,e){return function(t,e){var n=Object(_.groupBy)(e.available,(function(t){var e=t.start;return U(e)})),a=Object(_.groupBy)(e.booked,(function(t){var e=t.start;return U(e)}));return Array(7).fill(0).map((function(e,r){var c,i,s=G(t,{days:r}),o=U(s);return{date:s,schedule:Object(_.sortBy)([].concat(Object($.a)((null===(c=n[o])||void 0===c?void 0:c.map((function(t){var e=t.start,n=t.end;return{start:new Date(e),end:new Date(n),status:et}})))||[]),Object($.a)((null===(i=a[o])||void 0===i?void 0:i.map((function(t){var e=t.start,n=t.end;return{start:new Date(e),end:new Date(n),status:tt}})))||[])),["start"])}}))}(t.startDate,e.data)}}),addOneWeek:Object(W.b)({startDate:function(t){var e=t.startDate;return G(e,{days:7})}}),subtractOneWeek:Object(W.b)({startDate:function(t){var e=t.startDate;return K(e,{days:7})}})},at={canNext:function(t){var e=t.startDate;return G(e,{days:7})<=new Date(2100,12,31)},canPrev:function(t){var e=t.startDate,n=new Date((new Date).setHours(0,0,0,0));return K(e,{days:7})>=K(n,{days:n.getDay()})}},rt=Object(z.a)({initial:"startup",id:"calendar",context:{calendar:[],startDate:new Date},states:{startup:{always:"fetching",entry:"setStartDate"},fetching:{id:"fetchSchedule",invoke:{src:"fetchSchedule",onDone:{target:"fetched",actions:"updatedCalendar"},onError:"error"}},fetched:{on:{NEXT:{actions:"addOneWeek",cond:"canNext",target:"fetching"},PREV:{actions:"subtractOneWeek",cond:"canPrev",target:"fetching"}}},error:{}}},{services:I,guards:at,actions:nt}),ct=n(15),it=function(t){var e=t.start,n=t.end,a=t.status,r=Math.abs(n-e)/36e5*2;if(r<=0)return null;var c=Array(r).fill(0).map((function(t,n){return G(e,{hours:.5*n})}));return Object(ct.jsx)(ct.Fragment,{children:c.map((function(t){return Object(ct.jsx)("div",{children:Object(ct.jsx)(N,{isAvailable:a===et,children:U(t,"HH:mm")})},+t)}))})},st=function(){var t=Object(P.a)(rt,{devTools:!0,context:{startDate:new Date}}),e=Object(O.a)(t,2),n=e[0],a=e[1],r=n.context.calendar,c=(new Date).setHours(0,0,0,0);return Object(ct.jsxs)(w,{children:[Object(ct.jsx)(y,{children:"\u6388\u8ab2\u6642\u9593"}),Object(ct.jsxs)(k,{children:[Object(ct.jsxs)(M,{children:[Object(ct.jsx)(A,{onClick:function(){return a("PREV")},children:"<"}),Object(ct.jsx)(A,{onClick:function(){return a("NEXT")},children:">"})]}),Object(ct.jsx)(Y,{children:function(){if(Object(_.isEmpty)(r))return null;var t=r[0],e=r[r.length-1];return[U(t.date),U(e.date,"DD")].join(" - ")}()}),Object(ct.jsx)(E,{children:function(){var t=function(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",a=Math.abs(e)/60;return"".concat(n).concat(R(a,2,0),":00")}(new Date),e=Intl.DateTimeFormat().resolvedOptions().timeZone;return"* \u6642\u9593\u4ee5 ".concat(e," (GMT").concat(t,") \u986f\u793a")}()})]}),Object(ct.jsx)(S,{children:r&&r.map((function(t){var e=t.date,n=t.schedule;return Object(ct.jsxs)(F,{isAvailable:c<=e,children:[Object(ct.jsx)(C,{children:e.toLocaleString("zh-tw",{weekday:"narrow"})}),Object(ct.jsx)(H,{children:R(e.getDate(),2,"0")}),n&&n.map((function(t){var e=t.start,n=t.end,a=t.status;return Object(ct.jsx)(it,{start:e,end:n,status:a},+new Date(e))}))]},+e)}))})]})},ot=n(417);(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,e=t.search;return X(e)?{}:e.substring(1).split("&").reduce((function(t,e){var n=e.split("="),a=Object(O.a)(n,2),r=a[0],c=a[1];return Object(J.a)(Object(J.a)({},t),{},Object(V.a)({},r,c))}),{})})().debug&&Object(ot.a)({iframe:!1});var dt=function(){return Object(ct.jsx)(st,{})},ut=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,419)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};v.a.render(Object(ct.jsx)(h.a.StrictMode,{children:Object(ct.jsx)(dt,{})}),document.getElementById("root")),ut()}},[[412,1,2]]]);
//# sourceMappingURL=main.d5d079da.chunk.js.map