{"version":3,"sources":["constants/breakpoints.js","utils/mediaQuery.js","components/Calendar/style.js","mockData/schedule.js","machines/calendar/services.js","utils/base.js","utils/date.js","constants/calendar.js","machines/calendar/actions.js","utils/calendar.js","machines/calendar/guards.js","machines/calendar/index.js","components/Calendar/TimeSlot/index.js","components/Calendar/index.js","App.js","reportWebVitals.js","index.js"],"names":["breakpoints","xLarge","large","medium","small","down","breakpoint","vertical","Container","styled","div","Title","FunctionBar","Navigation","NavigationButton","button","DateTitle","TimeZoneDesc","CalendarContainer","CalendarItem","props","isAvailable","GridItem","WeekDay","Date","Time","mockSchedule","available","start","end","booked","services","fetchSchedule","Promise","resolve","setTimeout","padStart","string","targetLength","padString","Array","join","slice","isNil","value","undefined","add","date","days","months","years","hours","dateObj","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","setTime","getTime","subtract","isDate","Object","prototype","toString","call","isValidDate","Number","isNaN","valueOf","convert24HourTo12","hour","format","Error","year","month","day","getHours","hour12","minutes","getMinutes","second","getSeconds","replace","STATUSES","actions","setStartDate","assign","startDate","getDay","updatedCalendar","calendar","schedule","availableMap","groupBy","bookedMap","fill","map","_","index","key","sortBy","status","generateCalendar","data","addOneWeek","subtractOneWeek","guards","canNext","canPrev","today","setHours","calendarMachine","createMachine","initial","id","context","states","startup","always","entry","fetching","invoke","src","onDone","target","onError","fetched","on","NEXT","cond","PREV","error","TimeSlot","halfHours","Math","abs","timeSlots","Calendar","useMachine","devTools","state","send","onClick","isEmpty","length","renderTitle","timezone","timeZoneOffset","getTimezoneOffset","sign","clientTimezoneOffset","getTimeZone","name","Intl","DateTimeFormat","resolvedOptions","timeZone","renderTimeZone","toLocaleString","weekday","location","window","search","substring","split","reduce","acc","param","getUrlParams","debug","inspect","iframe","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d5d079da.chunk.js","sourcesContent":["const breakpoints = {\n  xLarge: '1200px',\n  large: '992px',\n  medium: '768px',\n  small: '576px',\n}\n\nexport default breakpoints\n","export const up = (breakpoint, vertical = false) =>\n  `@media (min-${vertical ? 'height' : 'width'}: calc(${breakpoint} + 0.02px))`\nexport const down = (breakpoint, vertical = false) =>\n  `@media (max-${vertical ? 'height' : 'width'}: ${breakpoint})`\nexport const between = (breakpointMin, breakpointMax, vertical = false) =>\n  `@media (max-${vertical ? 'height' : 'width'}: ${breakpointMax}) and (min-${\n    vertical ? 'height' : 'width'\n  }: calc(${breakpointMin} + 0.02px))`\n","import styled from 'styled-components'\nimport breakpoints from 'constants/breakpoints'\nimport { down } from 'utils/mediaQuery'\n\nexport const Container = styled.div`\n  margin: 1.25rem;\n  padding: 10px;\n  background: white;\n  box-shadow: 0px 5px 5px -3px rgb(0 0 0 / 20%),\n    0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%);\n  border-radius: 4px;\n\n  ${down(breakpoints.small)} {\n    margin: 0;\n  }\n`\n\nexport const Title = styled.div`\n  font-size: 1.25rem;\n  font-weight: 500;\n  margin-bottom: 20px;\n  color: rgba(0, 0, 0, 0.87);\n`\n\nexport const FunctionBar = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  flex-wrap: wrap;\n`\n\nexport const Navigation = styled.div`\n  margin-right: 10px;\n`\n\nexport const NavigationButton = styled.button`\n  padding: 7px 15px;\n  font-size: 12px;\n  border-radius: 3px;\n  cursor: pointer;\n  background: #fff;\n  border: 1px solid #dcdfe6;\n`\n\nexport const DateTitle = styled.div`\n  flex: 1;\n`\n\nexport const TimeZoneDesc = styled.div`\n  font-size: 12px;\n  margin-top: 5px;\n`\n\nexport const CalendarContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  min-height: 200px;\n`\nexport const CalendarItem = styled.div`\n  border-top: 4px solid;\n  border-color: ${(props) => (props.isAvailable ? '#02cab9' : '#b6b6b6')};\n  flex: 1;\n  margin-right: 10px;\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  ${down(breakpoints.small)} {\n    margin-right: 5px;\n  }\n`\n\nexport const GridItem = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nexport const WeekDay = styled(GridItem)`\n  margin-top: 10px;\n`\nexport const Date = styled(GridItem)`\n  margin-top: 20px;\n  margin-bottom: 20px;\n`\nexport const Time = styled(GridItem)`\n  margin-bottom: 10px;\n  font-size: 12px;\n  color: ${(props) => (props.isAvailable ? '#02cab9' : '#b6b6b6')};\n  font-weight: ${(props) => (props.isAvailable ? 700 : 300)};\n`\n","export const mockSchedule = {\n  available: [\n    { start: '2021-05-24T19:00:00Z', end: '2021-05-24T21:00:00Z' },\n    { start: '2021-05-25T08:00:00Z', end: '2021-05-25T09:00:00Z' },\n    { start: '2021-05-25T10:00:00Z', end: '2021-05-25T11:00:00Z' },\n    { start: '2021-05-25T14:00:00Z', end: '2021-05-25T15:00:00Z' },\n    { start: '2021-05-25T19:00:00Z', end: '2021-05-25T21:00:00Z' },\n    { start: '2021-05-26T07:00:00Z', end: '2021-05-26T09:00:00Z' },\n    { start: '2021-05-26T10:00:00Z', end: '2021-05-26T11:00:00Z' },\n    { start: '2021-05-26T19:00:00Z', end: '2021-05-26T21:00:00Z' },\n    { start: '2021-05-27T07:00:00Z', end: '2021-05-27T09:00:00Z' },\n    { start: '2021-05-27T19:00:00Z', end: '2021-05-27T21:00:00Z' },\n    { start: '2021-05-28T07:00:00Z', end: '2021-05-28T09:00:00Z' },\n    { start: '2021-05-28T10:00:00Z', end: '2021-05-28T11:00:00Z' },\n    { start: '2021-05-28T12:00:00Z', end: '2021-05-28T13:00:00Z' },\n    { start: '2021-05-28T19:00:00Z', end: '2021-05-28T21:00:00Z' },\n    { start: '2021-05-29T16:00:00Z', end: '2021-05-29T16:30:00Z' },\n  ],\n  booked: [\n    { start: '2021-05-25T15:00:00Z', end: '2021-05-25T16:00:00Z' },\n    { start: '2021-05-26T11:00:00Z', end: '2021-05-26T13:00:00Z' },\n    { start: '2021-05-26T14:00:00Z', end: '2021-05-26T15:00:00Z' },\n    { start: '2021-05-27T10:00:00Z', end: '2021-05-27T13:00:00Z' },\n    { start: '2021-05-27T14:00:00Z', end: '2021-05-27T15:00:00Z' },\n    { start: '2021-05-28T11:00:00Z', end: '2021-05-28T12:00:00Z' },\n    { start: '2021-05-28T14:00:00Z', end: '2021-05-28T15:00:00Z' },\n  ],\n}\n","import { mockSchedule } from 'mockData/schedule'\n\nconst fetchSchedule = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(mockSchedule)\n    }, 100)\n  })\n}\n\nconst services = {\n  fetchSchedule: fetchSchedule,\n}\n\nexport default services\n","export const padStart = (string, targetLength, padString = ' ') => {\n  return (Array(targetLength).join(padString) + string).slice(-targetLength)\n}\n\nexport const isNil = (value) => value === null || value === undefined\n\nexport const noop = () => {}\n\nexport const getUrlParams = (location = window.location) => {\n  const { search } = location\n\n  if (isNil(search)) return {}\n\n  return search\n    .substring(1)\n    .split('&')\n    .reduce((acc, param) => {\n      const [key, value] = param.split('=')\n\n      return {\n        ...acc,\n        [key]: value,\n      }\n    }, {})\n}\n","import { padStart } from './base'\n\nexport const add = (date, { days, months, years, hours }) => {\n  const dateObj = new Date(date)\n\n  if (days) dateObj.setDate(dateObj.getDate() + days)\n  else if (months) dateObj.setMonth(dateObj.getMonth() + months)\n  else if (years) dateObj.setFullYear(dateObj.getFullYear() + years)\n  else if (hours) dateObj.setTime(dateObj.getTime() + hours * 60 * 60 * 1000)\n\n  return dateObj\n}\n\nexport const subtract = (date, { days, months, years }) => {\n  return add(date, { days: -days, months: -months, years: -years })\n}\n\nexport const isDate = (date) => {\n  const isDate = Object.prototype.toString.call(date) === '[object Date]'\n  const isValidDate = date && !Number.isNaN(date.valueOf())\n\n  return isDate && isValidDate\n}\n\nexport const convert24HourTo12 = (hour) => hour % 12 || 12\n\nexport const format = (date, format = 'YYYY/MM/DD') => {\n  const dateObj = new Date(date)\n\n  if (!isDate(dateObj)) return new Error('invalid date')\n\n  const year = dateObj.getFullYear()\n  const month = dateObj.getMonth() + 1\n  const day = dateObj.getDate()\n  const hour = dateObj.getHours()\n  const hour12 = convert24HourTo12(hour)\n  const minutes = dateObj.getMinutes()\n  const second = dateObj.getSeconds()\n\n  return format\n    .replace('YYYY', year)\n    .replace('MM', padStart(month, 2, '0'))\n    .replace('DD', padStart(day, 2, '0'))\n    .replace('HH', padStart(hour, 2, '0'))\n    .replace('hh', padStart(hour12, 2, '0'))\n    .replace('mm', padStart(minutes, 2, '0'))\n    .replace('ss', padStart(second, 2, '0'))\n}\n\nexport const getTimeZone = (date) => {\n  const timeZoneOffset = date.getTimezoneOffset()\n  const sign = timeZoneOffset > 0 ? '-' : '+'\n  const clientTimezoneOffset = Math.abs(timeZoneOffset) / 60\n\n  return `${sign}${padStart(clientTimezoneOffset, 2, 0)}:00`\n}\n","export const MAX_YEAR = 2100\n\nexport const STATUSES = {\n  BOOKED: 'BOOKED',\n  AVAILABLE: 'AVAILABLE',\n}\n","import { assign } from 'xstate'\nimport { add, subtract } from 'utils/date'\nimport { generateCalendar } from 'utils/calendar'\n\nconst actions = {\n  setStartDate: assign({\n    startDate: ({ startDate }) => {\n      return subtract(startDate, { days: startDate.getDay() })\n    },\n  }),\n  updatedCalendar: assign({\n    calendar: ({ startDate }, { data }) => {\n      return generateCalendar(startDate, data)\n    },\n  }),\n  addOneWeek: assign({\n    startDate: ({ startDate }) => {\n      return add(startDate, { days: 7 })\n    },\n  }),\n  subtractOneWeek: assign({\n    startDate: ({ startDate }) => {\n      return subtract(startDate, { days: 7 })\n    },\n  }),\n}\n\nexport default actions\n","import { groupBy, sortBy } from 'lodash'\nimport { format, add } from 'utils/date'\nimport { STATUSES } from 'constants/calendar'\n\nexport const generateCalendar = (startDate, schedule) => {\n  const availableMap = groupBy(schedule.available, ({ start }) => {\n    return format(start)\n  })\n  const bookedMap = groupBy(schedule.booked, ({ start }) => {\n    return format(start)\n  })\n\n  return Array(7)\n    .fill(0)\n    .map((_, index) => {\n      const dateObj = add(startDate, { days: index })\n      const key = format(dateObj)\n\n      const todaySchedule = sortBy(\n        [\n          ...(availableMap[key]?.map(({ start, end }) => ({\n            start: new Date(start),\n            end: new Date(end),\n            status: STATUSES.AVAILABLE,\n          })) || []),\n          ...(bookedMap[key]?.map(({ start, end }) => ({\n            start: new Date(start),\n            end: new Date(end),\n            status: STATUSES.BOOKED,\n          })) || []),\n        ],\n        ['start']\n      )\n\n      return {\n        date: dateObj,\n        schedule: todaySchedule,\n      }\n    })\n}\n","import { add, subtract } from 'utils/date'\nimport { MAX_YEAR } from 'constants/calendar'\n\nconst guards = {\n  canNext: ({ startDate }) => {\n    return add(startDate, { days: 7 }) <= new Date(MAX_YEAR, 12, 31)\n  },\n  canPrev: ({ startDate }) => {\n    const today = new Date(new Date().setHours(0, 0, 0, 0))\n\n    return (\n      subtract(startDate, { days: 7 }) >=\n      subtract(today, { days: today.getDay() })\n    )\n  },\n}\n\nexport default guards\n","import { createMachine } from 'xstate'\n\nimport services from './services'\nimport actions from './actions'\nimport guards from './guards'\n\nexport const calendarMachine = createMachine(\n  {\n    initial: 'startup',\n    id: 'calendar',\n    context: {\n      calendar: [],\n      startDate: new Date(),\n    },\n    states: {\n      startup: {\n        always: 'fetching',\n        entry: 'setStartDate',\n      },\n      fetching: {\n        id: 'fetchSchedule',\n        invoke: {\n          src: 'fetchSchedule',\n          onDone: {\n            target: 'fetched',\n            actions: 'updatedCalendar',\n          },\n          onError: 'error',\n        },\n      },\n      fetched: {\n        on: {\n          NEXT: {\n            actions: 'addOneWeek',\n            cond: 'canNext',\n            target: 'fetching',\n          },\n          PREV: {\n            actions: 'subtractOneWeek',\n            cond: 'canPrev',\n            target: 'fetching',\n          },\n        },\n      },\n      error: {},\n    },\n  },\n  {\n    services,\n    guards,\n    actions,\n  }\n)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport * as Style from '../style'\nimport { format, add } from 'utils/date'\nimport { STATUSES } from 'constants/calendar'\n\nconst TimeSlot = ({ start, end, status }) => {\n  const halfHours = (Math.abs(end - start) / 36e5) * 2\n\n  if (halfHours <= 0) return null\n\n  const timeSlots = Array(halfHours)\n    .fill(0)\n    .map((_, index) => {\n      return add(start, { hours: 0.5 * index })\n    })\n\n  return (\n    <>\n      {timeSlots.map((date) => (\n        <div key={+date}>\n          <Style.Time isAvailable={status === STATUSES.AVAILABLE}>\n            {format(date, 'HH:mm')}\n          </Style.Time>\n        </div>\n      ))}\n    </>\n  )\n}\n\nTimeSlot.propTypes = {\n  start: PropTypes.instanceOf(Date).isRequired,\n  end: PropTypes.instanceOf(Date).isRequired,\n  status: PropTypes.string.isRequired,\n}\n\nexport default TimeSlot\n","import React from 'react'\nimport * as Style from './style'\nimport { useMachine } from '@xstate/react'\nimport { calendarMachine } from 'machines/calendar'\nimport { format, getTimeZone } from 'utils/date'\nimport { padStart } from 'utils/base'\nimport { isEmpty } from 'lodash'\nimport TimeSlot from './TimeSlot'\n\nconst Calendar = () => {\n  const [state, send] = useMachine(calendarMachine, {\n    devTools: true,\n    context: {\n      startDate: new Date(),\n    },\n  })\n\n  const { calendar } = state.context\n\n  const renderTitle = () => {\n    if (isEmpty(calendar)) return null\n\n    const start = calendar[0]\n    const end = calendar[calendar.length - 1]\n\n    return [format(start.date), format(end.date, 'DD')].join(' - ')\n  }\n\n  const renderTimeZone = () => {\n    const timezone = getTimeZone(new Date())\n    const name = Intl.DateTimeFormat().resolvedOptions().timeZone\n\n    return `* 時間以 ${name} (GMT${timezone}) 顯示`\n  }\n\n  const handleClickNext = () => send('NEXT')\n  const handleClickPrev = () => send('PREV')\n  const today = new Date().setHours(0, 0, 0, 0)\n\n  return (\n    <Style.Container>\n      <Style.Title>授課時間</Style.Title>\n      <Style.FunctionBar>\n        <Style.Navigation>\n          <Style.NavigationButton onClick={handleClickPrev}>\n            {'<'}\n          </Style.NavigationButton>\n          <Style.NavigationButton onClick={handleClickNext}>\n            {'>'}\n          </Style.NavigationButton>\n        </Style.Navigation>\n        <Style.DateTitle>{renderTitle()}</Style.DateTitle>\n        <Style.TimeZoneDesc>{renderTimeZone()}</Style.TimeZoneDesc>\n      </Style.FunctionBar>\n      <Style.CalendarContainer>\n        {calendar &&\n          calendar.map(({ date, schedule }) => {\n            return (\n              <Style.CalendarItem isAvailable={today <= date} key={+date}>\n                <Style.WeekDay>\n                  {date.toLocaleString('zh-tw', {\n                    weekday: 'narrow',\n                  })}\n                </Style.WeekDay>\n                <Style.Date>{padStart(date.getDate(), 2, '0')}</Style.Date>\n\n                {schedule &&\n                  schedule.map(({ start, end, status }) => (\n                    <TimeSlot\n                      start={start}\n                      end={end}\n                      status={status}\n                      key={+new Date(start)}\n                    />\n                  ))}\n              </Style.CalendarItem>\n            )\n          })}\n      </Style.CalendarContainer>\n    </Style.Container>\n  )\n}\n\nexport default Calendar\n","import Calendar from 'components/Calendar'\nimport { inspect } from '@xstate/inspect'\nimport { getUrlParams } from 'utils/base'\n\nif (getUrlParams().debug) {\n  inspect({\n    iframe: false,\n  })\n}\n\nfunction App() {\n  return <Calendar />\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import 'react-app-polyfill/ie11'\nimport 'react-app-polyfill/stable'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}